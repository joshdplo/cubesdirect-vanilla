function g(){const e=document.querySelector("#hamburger"),l=document.querySelector("header nav");e.addEventListener("click",()=>{const a=l.getAttribute("aria-hidden")==="true";e.setAttribute("aria-expanded",a?"true":"false"),l.setAttribute("aria-hidden",a?"false":"true")})}function w(){const e=document.querySelector("form#register");if(!e)return;const l=e.querySelector("input#email-register"),a=e.querySelector("input#password-register"),c=e.querySelector("input#password-register-confirm");e.querySelector("input#submit-register");const i=e.querySelector(".error-text");e.addEventListener("submit",function(m){m.preventDefault();let o=!1;const s=a.value.trim(),d=c.value.trim(),u=l.value.trim(),r=stringUtils.validatePasswords(s,d),f=stringUtils.validateEmail(u);if(r.valid||(o=r.message),f.valid||(o=f.message),o)return i.innerText=o,!1;console.log("submit!"),console.log(u,s),fetch("/api/auth/register",{method:"POST",body:JSON.stringify({email:u,password:s}),headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{console.log(t),t.error?i.innerText=t.error:(i.innerText=t.message,t.redirect&&(window.location.href=t.redirect))}).catch(t=>{console.error("Error:",t),i.innerText="ERROR SUBMITTING REGISTRATION!"})})}function h(){const e=document.querySelector("form#login");if(!e)return;const l=e.querySelector("input#email-login"),a=e.querySelector("input#password-login");e.querySelector("input#submit-login");const c=e.querySelector(".error-text");e.addEventListener("submit",function(n){n.preventDefault();let m=!1;const o=a.value.trim(),s=l.value.trim(),d=stringUtils.validatePasswords(o,o),u=stringUtils.validateEmail(s);if(d.valid||(m=d.message),u.valid||(m=u.message),m)return c.innerText=m,!1;console.log("submit!"),console.log(s,o),fetch("/api/auth/login",{method:"POST",body:JSON.stringify({email:s,password:o}),headers:{"Content-Type":"application/json;charset=utf-8"}}).then(r=>r.json()).then(r=>{console.log(r),r.error?c.innerText=r.error:(c.innerText=r.message,r.redirect&&(window.location.href=r.redirect))}).catch(r=>{console.error("Error:",r),c.innerText="ERROR LOGGING IN!"})})}function p(){const e=document.querySelector("form#change-password");if(!e)return;const l=e.querySelector("input#password-current-password"),a=e.querySelector("input#password-new-password"),c=e.querySelector("input#password-new-password-confirm");e.querySelector("input#submit-change-password");const i=e.querySelector(".error-text");e.addEventListener("submit",function(m){m.preventDefault();let o=!1;const s=l.value.trim(),d=a.value.trim(),u=c.value.trim(),r=stringUtils.validatePasswords(s,s),f=stringUtils.validatePasswords(d,u);if(s===d&&(o="New password can't be the same as current password"),f.valid||(o="New "+f.message),r.valid||(o=r.message),o)return i.innerText=o,!1;console.log("submit!"),console.log(s,d),fetch("/api/auth/change-password",{method:"POST",body:JSON.stringify({currentPassword:s,newPassword:d,newPasswordConfirm:u}),headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{console.log(t),t.error?i.innerText=t.error:(i.innerText=t.message,t.redirect&&(window.location.href=t.redirect))}).catch(t=>{console.error("Error:",t),i.innerText="ERROR SUBMITTING REGISTRATION!"})})}function v(){const e=document.querySelectorAll("button.add-to-cart"),l=a=>{const c=parseInt(a.target.getAttribute("data-productId"),10);fetch("/api/cart",{method:"POST",body:JSON.stringify({productId:c,productQuantity:1}),headers:{"Content-Type":"application/json"}}).then(n=>n.json()).then(n=>{console.log(n),n.error?globalMessage(n.error,"red"):(globalMessage(n.message,"green"),n.redirect&&(window.location.href=n.redirect))}).catch(n=>{console.error("Error:",n),globalMessage("ERROR ADDING TO CART!","red")})};e.forEach(a=>a.addEventListener("click",l))}document.addEventListener("DOMContentLoaded",function(){console.log("-> main.js"),g(),w(),h(),p(),v()});
//# sourceMappingURL=main.js.map
