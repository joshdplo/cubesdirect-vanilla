{"version":3,"file":"main.js","sources":["../src/scripts/header.js","../src/scripts/registerForm.js","../src/scripts/loginForm.js","../src/scripts/changePasswordForm.js","../src/scripts/addToCartButtons.js","../src/main.js"],"sourcesContent":["/**\r\n * Header Mock\r\n */\r\nexport default function header() {\r\n  const hamburger = document.querySelector('#hamburger');\r\n  const menu = document.querySelector('header nav');\r\n\r\n  hamburger.addEventListener('click', () => {\r\n    const isHidden = menu.getAttribute('aria-hidden') === 'true';\r\n    hamburger.setAttribute('aria-expanded', isHidden ? 'true' : 'false');\r\n    menu.setAttribute('aria-hidden', isHidden ? 'false' : 'true');\r\n  });\r\n}","/**\r\n * Register Form Mock\r\n */\r\nexport default function registerForm() {\r\n  const form = document.querySelector('form#register');\r\n  if (!form) return;\r\n  const email = form.querySelector('input#email-register');\r\n  const password1 = form.querySelector('input#password-register');\r\n  const password2 = form.querySelector('input#password-register-confirm');\r\n  const submitButton = form.querySelector('input#submit-register');\r\n  const errorText = form.querySelector('.error-text');\r\n\r\n  form.addEventListener('submit', function onFormSubmit(e) {\r\n    e.preventDefault();\r\n    let error = false;\r\n    const pass1Value = password1.value.trim();\r\n    const pass2Value = password2.value.trim();\r\n    const emailValue = email.value.trim();\r\n\r\n    const validatedPasswords = stringUtils.validatePasswords(pass1Value, pass2Value);\r\n    const validatedEmail = stringUtils.validateEmail(emailValue);\r\n\r\n    if (!validatedPasswords.valid) error = validatedPasswords.message;\r\n    if (!validatedEmail.valid) error = validatedEmail.message;\r\n\r\n    if (error) {\r\n      errorText.innerText = error;\r\n      return false;\r\n    } else {\r\n      console.log('submit!');\r\n      console.log(emailValue, pass1Value);\r\n\r\n      // Register POST request\r\n      fetch('/api/auth/register', {\r\n        method: 'POST',\r\n        body: JSON.stringify({ email: emailValue, password: pass1Value }),\r\n        headers: { 'Content-Type': 'application/json' }\r\n      }).then(res => res.json())\r\n        .then(response => {\r\n          console.log(response);\r\n          if (response.error) {\r\n            errorText.innerText = response.error;\r\n          } else {\r\n            errorText.innerText = response.message;\r\n            if (response.redirect) window.location.href = response.redirect;\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error('Error:', error);\r\n          errorText.innerText = 'ERROR SUBMITTING REGISTRATION!';\r\n        });\r\n    }\r\n  });\r\n}","/**\r\n * Login Form Mock\r\n */\r\nexport default function loginForm() {\r\n  const form = document.querySelector('form#login');\r\n  if (!form) return;\r\n  const email = form.querySelector('input#email-login');\r\n  const password = form.querySelector('input#password-login');\r\n  const submitButton = form.querySelector('input#submit-login');\r\n  const errorText = form.querySelector('.error-text');\r\n\r\n  form.addEventListener('submit', function onFormSubmit(e) {\r\n    e.preventDefault();\r\n    let error = false;\r\n    const passValue = password.value.trim();\r\n    const emailValue = email.value.trim();\r\n\r\n    const validatedPasswords = stringUtils.validatePasswords(passValue, passValue);\r\n    const validatedEmail = stringUtils.validateEmail(emailValue);\r\n\r\n    if (!validatedPasswords.valid) error = validatedPasswords.message;\r\n    if (!validatedEmail.valid) error = validatedEmail.message;\r\n\r\n    if (error) {\r\n      errorText.innerText = error;\r\n      return false;\r\n    } else {\r\n      console.log('submit!');\r\n      console.log(emailValue, passValue);\r\n\r\n      // Login POST request\r\n      fetch('/api/auth/login', {\r\n        method: 'POST',\r\n        body: JSON.stringify({ email: emailValue, password: passValue }),\r\n        headers: { 'Content-Type': 'application/json;charset=utf-8' }\r\n      }).then(res => res.json())\r\n        .then(response => {\r\n          console.log(response);\r\n          if (response.error) {\r\n            errorText.innerText = response.error;\r\n          } else {\r\n            errorText.innerText = response.message;\r\n            if (response.redirect) window.location.href = response.redirect;\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error('Error:', error);\r\n          errorText.innerText = 'ERROR LOGGING IN!';\r\n        });\r\n    }\r\n  });\r\n}","/**\r\n * Change Password Form Mock\r\n */\r\nexport default function changePasswordForm() {\r\n  const form = document.querySelector('form#change-password');\r\n  if (!form) return;\r\n  const currentPassword = form.querySelector('input#password-current-password');\r\n  const newPassword = form.querySelector('input#password-new-password');\r\n  const newPasswordConfirm = form.querySelector('input#password-new-password-confirm');\r\n  const submitButton = form.querySelector('input#submit-change-password');\r\n  const errorText = form.querySelector('.error-text');\r\n\r\n  form.addEventListener('submit', function onFormSubmit(e) {\r\n    e.preventDefault();\r\n    let error = false;\r\n    const currentPassValue = currentPassword.value.trim();\r\n    const newPassValue = newPassword.value.trim();\r\n    const newPassConfirmValue = newPasswordConfirm.value.trim();\r\n\r\n    const validatedCurrentPassword = stringUtils.validatePasswords(currentPassValue, currentPassValue);\r\n    const validatedNewPassword = stringUtils.validatePasswords(newPassValue, newPassConfirmValue);\r\n\r\n    if (currentPassValue === newPassValue) error = 'New password can\\'t be the same as current password';\r\n    if (!validatedNewPassword.valid) error = 'New ' + validatedNewPassword.message;\r\n    if (!validatedCurrentPassword.valid) error = validatedCurrentPassword.message;\r\n\r\n    if (error) {\r\n      errorText.innerText = error;\r\n      return false;\r\n    } else {\r\n      console.log('submit!');\r\n      console.log(currentPassValue, newPassValue);\r\n\r\n      // Change Password POST request\r\n      fetch('/api/auth/change-password', {\r\n        method: 'POST',\r\n        body: JSON.stringify({\r\n          currentPassword: currentPassValue,\r\n          newPassword: newPassValue,\r\n          newPasswordConfirm: newPassConfirmValue\r\n        }),\r\n        headers: { 'Content-Type': 'application/json' }\r\n      }).then(res => res.json())\r\n        .then(response => {\r\n          console.log(response);\r\n          if (response.error) {\r\n            errorText.innerText = response.error;\r\n          } else {\r\n            errorText.innerText = response.message;\r\n            if (response.redirect) window.location.href = response.redirect;\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error('Error:', error);\r\n          errorText.innerText = 'ERROR SUBMITTING REGISTRATION!';\r\n        });\r\n    }\r\n  });\r\n}","/**\r\n * Add to Cart Buttons Mock\r\n */\r\nexport default function addToCartButtons() {\r\n  const cartButtons = document.querySelectorAll('button.add-to-cart');\r\n  const onAddToCartClick = (e) => {\r\n    const productId = parseInt(e.target.getAttribute('data-productId'), 10);\r\n    const productQuantity = 1;\r\n\r\n    // Add to cart POST request\r\n    fetch('/api/cart', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ productId, productQuantity }),\r\n      headers: { 'Content-Type': 'application/json' }\r\n    }).then(res => res.json())\r\n      .then(response => {\r\n        console.log(response);\r\n        if (response.error) {\r\n          globalMessage(response.error, 'red');\r\n        } else {\r\n          globalMessage(response.message, 'green');\r\n          if (response.redirect) window.location.href = response.redirect;\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error('Error:', error);\r\n        globalMessage('ERROR ADDING TO CART!', 'red');\r\n      });\r\n  }\r\n\r\n  cartButtons.forEach((el) => el.addEventListener('click', onAddToCartClick));\r\n}","import './styles/reset.css';\r\nimport './styles/style.css';\r\nimport header from './scripts/header';\r\nimport registerForm from './scripts/registerForm';\r\nimport loginForm from './scripts/loginForm';\r\nimport changePasswordForm from './scripts/changePasswordForm';\r\nimport addToCartButtons from './scripts/addToCartButtons';\r\n\r\n/**\r\n * DOM Load\r\n */\r\ndocument.addEventListener('DOMContentLoaded', function onDOMLoad() {\r\n  console.log(`-> main.js`);\r\n\r\n  header();\r\n  registerForm();\r\n  loginForm();\r\n  changePasswordForm();\r\n  addToCartButtons();\r\n});"],"names":["header","hamburger","menu","isHidden","registerForm","form","email","password1","password2","errorText","e","error","pass1Value","pass2Value","emailValue","validatedPasswords","validatedEmail","res","response","loginForm","password","passValue","changePasswordForm","currentPassword","newPassword","newPasswordConfirm","currentPassValue","newPassValue","newPassConfirmValue","validatedCurrentPassword","validatedNewPassword","addToCartButtons","cartButtons","onAddToCartClick","productId","el"],"mappings":"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"}