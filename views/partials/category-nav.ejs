<ul>
  <% categories.forEach(cat => {  %>
  <% const hasSubcats = cat.subcategories.length %>
  <li <%= cat.subcategories.length ? 'class=parent' : '' %>>
    <% if(hasSubcats) { %>
    <button data-cmp="tab" <%= `id=cat${cat.id} aria-expanded=false aria-controls=subcats${cat.id}` %>>
      <%= stringUtils.titleCase(cat.name) %>
    </button>
    <% } else { %>
    <a href="/category/<%= cat.id %>">
      <%= stringUtils.titleCase(cat.name) %>
    </a>
    <% } %>
    <% if(cat.subcategories.length) { %>
    <div <%= cat.subcategories.length ? `id=subcats${cat.id} aria-labeledby=cat${cat.id}` : '' %>>
      <ul class="l2">
        <% if(hasSubcats) { %>
        <li>
          <a href="/category/<%= cat.id %>">
            Shop All
          </a>
        </li>
        <% } %>
        <% cat.subcategories.forEach(subcat => { %>
        <li>
          <a href="/category/<%= subcat.id %>">
            <%= stringUtils.titleCase(subcat.name) %>
          </a>
        </li>
        <% }) %>
      </ul>
    </div>
    <% } %>
  </li>
  <% }) %>
</ul>